app-id: com.atlauncher.ATLauncher
runtime: org.freedesktop.Platform
runtime-version: '20.08'
sdk: org.freedesktop.Sdk
sdk-extensions:
    - org.freedesktop.Sdk.Extension.openjdk8
command: atlauncher.sh
build-options:
    env:
        PATH: /app/jre/bin:/usr/bin
finish-args:
    - --env=PATH=/app/jre/bin:/usr/bin:/app/bin
    - --socket=x11
    - --share=ipc
    - --device=all # controller support
    - --socket=pulseaudio
    - --share=network
cleanup:
    - ./icon.png
modules:
    - name: openjdk
      buildsystem: simple
      build-commands:
          - /usr/lib/sdk/openjdk8/install.sh

    - name: atlauncher
      buildsystem: simple
      build-commands:
          - install -D ATLauncher-3.4.3.3.jar /app/bin/ATLauncher.jar
          - unzip -p /app/bin/ATLauncher.jar assets/image/icon.png > ./icon.png
          - install -D ./icon.png /app/share/icons/hicolor/256x256/apps/com.atlauncher.ATLauncher.png
      sources:
          - type: file
            path: ATLauncher-3.4.3.3.jar
            url: https://github.com/ATLauncher/ATLauncher/releases/download/v3.4.3.3/ATLauncher-3.4.3.3.jar
            sha256: df89cadd23fd441f1a8731446b041265b4195f11473e2edf594f8806ec40e074

    - name: atlauncher.sh
      buildsystem: simple
      build-commands:
          - install -D atlauncher.sh /app/bin/atlauncher.sh
      sources:
          - type: file
            path: atlauncher.sh

    - name: atlauncher-extra
      buildsystem: simple
      build-commands:
          - install -D com.atlauncher.ATLauncher.desktop /app/share/applications/com.atlauncher.ATLauncher.desktop
          - install -D com.atlauncher.ATLauncher.metainfo.xml /app/share/metainfo/com.atlauncher.ATLauncher.appdata.xml
      sources:
          - type: file
            path: com.atlauncher.ATLauncher.metainfo.xml
          - type: file
            path: com.atlauncher.ATLauncher.desktop
